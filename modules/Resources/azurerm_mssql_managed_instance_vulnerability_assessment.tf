resource "azurerm_mssql_managed_instance_vulnerability_assessment" "euclid" {
  managed_instance_id        = azurerm_mssql_managed_instance.euclid.id
  storage_container_path     = var.azurerm_mssql_managed_instance_vulnerability_assessment-storage_container_path
  storage_account_access_key = azurerm_storage_account.euclid.primary_access_key

  recurring_scans {
    enabled                   = var.azurerm_mssql_managed_instance_vulnerability_assessment-recurring_scans_enabled
    email_subscription_admins = var.azurerm_mssql_managed_instance_vulnerability_assessment-recurring_scans_email_subscription_admins
    emails = [var.azurerm_mssql_managed_instance_vulnerability_assessment-recurring_scans_emails]
  }
    depends_on = [azurerm_mssql_managed_instance_security_alert_policy.euclid]
}